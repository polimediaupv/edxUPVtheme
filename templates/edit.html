<%! from django.utils.translation import ugettext as _ %>
<%! from microsite_configuration import microsite %>

<%inherit file="main.html" />

<%namespace name='static' file='static_content.html'/>

<%namespace file='main.html' import="login_query"/>

<%! from django.core.urlresolvers import reverse %>
<%! from django.utils import html %>
<%! from django_countries.countries import COUNTRIES %>
<%! from django.utils.translation import ugettext as _ %>
<%! from student.models import UserProfile %>
<%! from datetime import date %>
<%! from third_party_auth import pipeline, provider %>
<%! import calendar %>

<%block name="pagetitle">${_("Edit profile")}</%block>
<%block name="bodyclass">view-register</%block>





<section class="introduction">
  <header>
    <h1 class="title">
      <span class="title-super">${_("Modify your profile")}</span>
      <span class="title-sub">${_("Update your personal data")}</span>
    </h1>
  </header>
</section>

<section class="register container">
  <section role="main" class="content">

        <form action="/edit_profile" method="post">
            <input type="hidden" name="csrfmiddlewaretoken" value="${ csrf_token }">


            <li class="field-group">
            <div class="field optional select" id="field-country">
              <label for="country">${_("Country")}</label>
              <select id="country" name="country" ${'required aria-required="true"' if settings.REGISTRATION_EXTRA_FIELDS['country'] == 'required' else ''}>
                <option value="">--</option>

                %for code, country_name in COUNTRIES:
                %if ( code != up.country ):
                        <option value="${code}">${ unicode(country_name) }</option>
                  %else:
                        <option selected="selected" value="${code}">${ unicode(country_name) }</option>
                  %endif


                %endfor
              </select>
            </div>
            </li>


            <li class="field-group">
            <div class="field ${settings.REGISTRATION_EXTRA_FIELDS['level_of_education']} select" id="field-education-level">
              <label for="education-level">${_("Highest Level of Education Completed")}</label>
              <select id="education-level" name="level_of_education" ${'required aria-required="true"' if settings.REGISTRATION_EXTRA_FIELDS['level_of_education'] == 'required' else ''}>
                <option value="">--</option>

                %for code, ed_level in UserProfile.LEVEL_OF_EDUCATION_CHOICES:
                  %if ( code != up.level_of_education  ):
                        <option value="${code}">${_(ed_level)}</option>
                  %else:
                        <option selected="selected" value="${code}">${_(ed_level)}</option>
                  %endif
                %endfor
              </select>
            </div>
            </li>


            <li class="field-group">
            <div class="field ${settings.REGISTRATION_EXTRA_FIELDS['gender']} select" id="field-gender">
              <label for="gender">${_("Gender")}</label>
              <select id="gender" name="gender" ${'required aria-required="true"' if settings.REGISTRATION_EXTRA_FIELDS['gender'] == 'required' else ''}>
                <option value="">--</option>

                %for code, gender in UserProfile.GENDER_CHOICES:
                  %if (code!= up.gender) :
                    <option value="${code}">${_(gender)}</option>
                  %else:
                     <option selected="selected" value="${code}">${_(gender)}</option>
                  %endif

                %endfor
              </select>
            </div>
          </li>

          <li class="field-group">
            <div class="field ${settings.REGISTRATION_EXTRA_FIELDS['year_of_birth']} select" id="field-yob">
              <label for="yob">${_("Year of Birth")}</label>
              <select id="yob" name="year_of_birth" ${'required aria-required="true"' if settings.REGISTRATION_EXTRA_FIELDS['year_of_birth'] == 'required' else ''}>

                <option value="">--</option>


                %for year in UserProfile.VALID_YEARS:
                  %if (year == up.year_of_birth):
                    <option selected="selected" value="${year}">${year}</option>
                  %else:
                    <option value="${year}">${year}</option>
                  %endif
                %endfor

              </select>
            </div>
          </li>




            <li class="field-group">
            <div class="field ${settings.REGISTRATION_EXTRA_FIELDS['goals']} text" id="field-goals">
                <label for="goals">${_("Goals")}</label>
                <textarea id="goals" name="goals"  ${'required aria-required="true"' if settings.REGISTRATION_EXTRA_FIELDS['goals'] == 'required' else ''}>${up.goals}</textarea>
            </div>

            </li>

            <li class="field-group">
            <div class="field ${settings.REGISTRATION_EXTRA_FIELDS['mailing_address']} text" id="field-address-mailing">
            <label for="address-mailing">${_("Mailing Address")}</label>
            <textarea id="address-mailing" name="mailing_address" ${'required aria-required="true"' if settings.REGISTRATION_EXTRA_FIELDS['mailing_address'] == 'required' else ''}>${up.mailing_address}</textarea>
            </div>
            </li>





            <div class="form-actions">



            <button name="submit" type="submit" id="submit" class="action action-primary action-update">${_("Update Profile")}</button>




         </form>
      </section>
    </section>



